;$(function(){$('.btn_formulaire_add_news').click(function(){beneficiaire_id=$(this).attr('id');$('.modal-dialog form').remove();formDuBeneficiaire='#block_formulaire_ajout_new_'+beneficiaire_id;$(formDuBeneficiaire+' .modal-content').append($('#block_formulaire_add_news').html());$(formDuBeneficiaire+' #hidden_beneficiaire_id').val(beneficiaire_id);$(formDuBeneficiaire+' .statut').change(function(){var i=$('option:selected').val();$('.detailStatut').attr('disabled','disabled');ajaxFormNews(i,!0)});$('#form_add_news').on('submit',function(i){i.preventDefault();$.ajax({url:Routing.generate('application_plateforme_homepage'),type:$(this).attr('method'),data:$(this).serialize(),cache:!0,dataType:'json',beforeSend:function(){},success:function(i){template=i;$('#b'+beneficiaire_id).html(template);$('#block_formulaire_ajout_new_'+beneficiaire_id).modal('toggle')}})})});if($('#tabNews').length!=0){$('#newsForm .statut').change(function(){var i=$(this).children('option:selected').val();$('.detailStatut').attr('disabled','disabled');ajaxFormNews(i,!0)});$('#suiviAdministratifNewForm .statutSuiviAd').change(function(){var i=$(this).children('option:selected').val();$('#suiviAdministratifNewForm .detailStatutSuiviAd').attr('disabled','disabled');ajaxFormNews(i)});$('#suiviAdministratifEditForm .statutSuiviAd').change(function(){var i=$(this).children('option:selected').val();$('#suiviAdministratifEditForm .detailStatutSuiviAd').attr('disabled','disabled');ajaxFormNews(i)})};url=window.location.href;console.log($('.typeUtilisateur a').text());if(url.indexOf('user/type/admin')!=-1){$('.typeUtilisateur a').removeClass('active');$('.typeUtilisateur .itemAdmin').addClass('active')}
else if(url.indexOf('user/type/commercial')!=-1){$('.typeUtilisateur a').removeClass('active');$('.typeUtilisateur .itemCommercial').addClass('active')}
else if(url.indexOf('user/type/gestion')!=-1){$('.typeUtilisateur a').removeClass('active');$('.typeUtilisateur .itemGestion').addClass('active')}
else if(url.indexOf('user/type')!=-1){$('.typeUtilisateur a').removeClass('active');$('.typeUtilisateur .itemConsultant').addClass('active')}});function ajaxFormNews(i,t,e){$.ajax({type:'get',url:Routing.generate('application_plateforme_detail_statut',{idStatut:i}),beforeSend:function(){console.log('ça charge');$('.block_info_chargement').show()}}).done(function(i){if(t==!0){$('.detailStatut').removeAttr('disabled');$('.detailStatut').html('')}
else{$('#suiviAdministratifNewForm .detailStatutSuiviAd').removeAttr('disabled');$('#suiviAdministratifEditForm .detailStatutSuiviAd').removeAttr('disabled');$('#suiviAdministratifNewForm .detailStatutSuiviAd').html('');$('#suiviAdministratifEditForm .detailStatutSuiviAd').html('')};$('.block_info_chargement').hide();for(var a=0;a<i.details.length;a++){console.log(i.details[a].detail);if($('#tabNews').length!=0){if(t==!0){$('#newsForm .detailStatut').append('<option value='+i.details[a].id+'>'+i.details[a].detail+'</option>')}
else{$('#suiviAdministratifNewForm .detailStatutSuiviAd').append('<option value='+i.details[a].id+'>'+i.details[a].detail+'</option>');if(i.details[a].id==e)$('#suiviAdministratifEditForm .detailStatutSuiviAd').append('<option selected value='+i.details[a].id+'>'+i.details[a].detail+'</option>');else $('#suiviAdministratifEditForm .detailStatutSuiviAd').append('<option value='+i.details[a].id+'>'+i.details[a].detail+'</option>')}}
else{$(formDuBeneficiaire+' .detailStatut').append('<option value='+i.details[a].id+'>'+i.details[a].detail+'</option>')}}})};
;$(window).load(function(){$("#overlayB").fadeOut("1500");console.log("Infos disponibles ")});$(function(){console.log("Recupération de vos infos");typeUtilisateur=$("#application_usersbundle_users_typeUserHidden").val();if(typeUtilisateur!="Administrateur")$(".block_form_role_user").hide();if($(".role_user:checked").val()=="ROLE_CONSULTANT"){$(".block_form_calendar_uri").show();$(".block_form_calendar_id").show();$(".block_form_block_form_format_presence").show();$(".block_form_departement").show();$(".block_form_ville").show()}
else{$(".block_form_calendar_uri").hide();$(".block_form_calendar_id").hide();$(".block_form_format_presence").hide();$(".block_form_departement").hide();$(".departementInputForAjax").val("0");$(".block_form_ville").hide()};$(".role_user").click(function(){switch($(this).val()){case"ROLE_CONSULTANT":$(".block_form_calendar_uri")[this.checked?"show":"hide"]();$(".block_form_calendar_id")[this.checked?"show":"hide"]();$(".block_form_format_presence")[this.checked?"show":"hide"]();$(".block_form_departement")[this.checked?"show":"hide"]();$(".block_form_ville")[this.checked?"show":"hide"]();break}});$(".villeAjax option:first-child").val("");$(".villeAjax option:first-child").text("");$(".villeAjax").attr("disabled","disabled");$(".departementInputForAjax").keyup(function(){$(".villeAjax").attr("disabled","disabled");nombreOptions=$(".villeAjax  option").length;dpt=$(this).val();if(dpt.length==2){console.log("je lance l'ajax");$.ajax({type:"get",url:Routing.generate("application_plateforme_get_ville_ajax",{departement:dpt}),beforeSend:function(){console.log("ça charge");$(".block_info_chargement").show()}}).done(function(e){$(".block_info_chargement").hide();$(".villeAjax option").remove();$(".villeAjax").removeAttr("disabled");for(var l=0;l<e.villes.length;l++){$(".villeAjax").append("<option value="+e.villes[l].id+">"+e.villes[l].nom+"</option>")}})}});if($("#application_usersbundle_users_codePostalHidden").length==1){cp=$("#application_usersbundle_users_codePostalHidden").val();idVille=$("#application_usersbundle_users_idVilleHidden").val();if(cp.length==5){console.log("je lance l'ajax");$.ajax({type:"get",url:Routing.generate("application_plateforme_get_ville_ajax",{departement:cp.substr(0,2)}),beforeSend:function(){console.log("ça charge");$(".block_info_chargement").show()}}).done(function(e){$(".block_info_chargement").hide();$(".villeAjax option").remove();$(".villeAjax").removeAttr("disabled");for(var l=0;l<e.villes.length;l++){if(idVille==e.villes[l].id)$(".villeAjax").append("<option selected data-cp="+e.villes[l].cp+" value="+e.villes[l].id+">"+e.villes[l].nom+"</option>");else $(".villeAjax").append("<option data-cp="+e.villes[l].cp+" value="+e.villes[l].id+">"+e.villes[l].nom+"</option>")}})}}});