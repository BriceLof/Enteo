;function addNews(e){beneficiaire_id=$(e).attr("id");console.log(beneficiaire_id);$(".modal-dialog form").remove();formDuBeneficiaire="#block_formulaire_ajout_new_"+beneficiaire_id;$(formDuBeneficiaire+" .modal-content").append($("#block_formulaire_add_news").html());$(formDuBeneficiaire+" #hidden_beneficiaire_id").val(beneficiaire_id);console.log(Routing.generate("application_new_news",{id:beneficiaire_id}));$(formDuBeneficiaire+" form").attr("action",Routing.generate("application_new_news",{id:beneficiaire_id}));$(formDuBeneficiaire+" .statut").change(function(){var e=$(this).children("option:selected").val();$(".detailStatut").attr("disabled","disabled");console.log(e);ajaxFormNews(e,!0)});$("#form_add_news").on("submit",function(e){e.preventDefault();$.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:$(this).serialize(),cache:!0,dataType:"json",beforeSend:function(){},success:function(e){template=e;$("#block_formulaire_ajout_new_"+beneficiaire_id).modal("toggle");$("#info_beneficiaire"+beneficiaire_id).html(template)}})})};function addNouvelle(e){beneficiaire_id=$(e).attr("id");$(".modal-dialog form").remove();console.log("on y est");formDuBeneficiaire="#block_formulaire_ajout_nouvelle_"+beneficiaire_id;$(formDuBeneficiaire+" .modal-content").append($("#block_formulaire_add_nouvelle").html());$(formDuBeneficiaire+" #hidden_beneficiaire_id").val(beneficiaire_id);$(formDuBeneficiaire+" form").attr("action",Routing.generate("application_new_nouvelle",{id:beneficiaire_id}));$("#form_add_nouvelle").on("submit",function(e){e.preventDefault();$.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:$(this).serialize(),cache:!0,dataType:"json",beforeSend:function(){},success:function(e){template=e;console.log(e);$("#block_formulaire_ajout_nouvelle_"+beneficiaire_id).modal("toggle");$("#info_beneficiaire"+beneficiaire_id).html(template)}})})};function voirNouvelle(e){beneficiaire_id=$(e).attr("id");$.ajax({type:"get",url:Routing.generate("application_show_all_ajax_nouvelle",{idBeneficiaire:beneficiaire_id}),beforeSend:function(){console.log("ça charge")}}).done(function(e){console.log(e.nouvelles[0]);var t="";for(i=0;i<e.nouvelles.length;i++){t+="<p>&bull; "+e.nouvelles[i].from+" le <i>"+e.nouvelles[i].date+"</i> : <b>"+e.nouvelles[i].titre+"</b></p><p style='margin-left:20px'>"+e.nouvelles[i].message+"</p>"};$("#listeNouvelle_"+beneficiaire_id).html(t)})};$(function(){$(".datepickerBrice").datepicker({dateFormat:"dd/mm/yy",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Decembre"],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesMin:["Di","Lu","Ma","Me","Je","Ve","Sa"]});$(".datepickerBrice").each(function(){if($(this).val().length>0){dateEn=$(this).val();dateSplit=dateEn.split("-");dateFr=dateSplit[2]+"/"+dateSplit[1]+"/"+dateSplit[0];$(this).val(dateFr)}});$("form").submit(function(){$(".datepickerBrice").each(function(){if($(this).val().length>0){dateFr=$(this).val();dateSplit=dateFr.split("/");dateEn=dateSplit[2]+"-"+dateSplit[1]+"-"+dateSplit[0];$(this).val(dateEn)}})});$("#ajaxForm .statutSuiviAd").change(function(){var e=$(this).children("option:selected").val();$("#ajaxForm .detailStatutSuiviAd").attr("disabled","disabled");ajaxFormNews(e)});$("#linkMoreFilter").click(function(){if($(".moreFilterSearch").is(":hidden")){$(".moreFilterSearch").show();$("#linkMoreFilter").text("- de Filtres")}
else{$(".moreFilterSearch").hide();$("#linkMoreFilter").text("+ de Filtres")};return!1});if($("#tabNews").length!=0){$("#newsForm .statut").change(function(){var e=$(this).children("option:selected").val();$(".detailStatut").attr("disabled","disabled");if(e==12){$("#newsForm #message_news").show()}
else{$("#newsForm #message_news").hide()};ajaxFormNews(e,!0)});$("#suiviAdministratifNewForm .statutSuiviAd").change(function(){var e=$(this).children("option:selected").val();$("#suiviAdministratifNewForm .detailStatutSuiviAd").attr("disabled","disabled");ajaxFormNews(e)});$("#suiviAdministratifEditForm .statutSuiviAd").change(function(){var e=$(this).children("option:selected").val();$("#suiviAdministratifEditForm .detailStatutSuiviAd").attr("disabled","disabled");ajaxFormNews(e)})};$(".modal").draggable({handle:".modal-header"});$("#suivi_administratif_info").keyup(function(){inputVal=$(this).val();if(inputVal.length>0){$("#suivi_administratif_statut").removeAttr("required")}});$(".statut_paiement_facture").mouseover(function(){$(this).css("cursor","pointer");var i=$(this).attr("id"),e=i.replace("statut","block_historique");$(".block_historique_paiement_facture").hide();$("#"+e).show()}).mouseout(function(){$(".block_historique_paiement_facture").hide()});url=window.location.href;console.log($(".typeUtilisateur a").text());if(url.indexOf("user/type/admin")!=-1){$(".typeUtilisateur a").removeClass("active");$(".typeUtilisateur .itemAdmin").addClass("active")}
else if(url.indexOf("user/type/commercial")!=-1){$(".typeUtilisateur a").removeClass("active");$(".typeUtilisateur .itemCommercial").addClass("active")}
else if(url.indexOf("user/type/gestion")!=-1){$(".typeUtilisateur a").removeClass("active");$(".typeUtilisateur .itemGestion").addClass("active")}
else if(url.indexOf("user/type")!=-1){$(".typeUtilisateur a").removeClass("active");$(".typeUtilisateur .itemConsultant").addClass("active")}});function ajaxFormNews(e,i,t){console.log(e);$.ajax({type:"get",url:Routing.generate("application_plateforme_detail_statut",{idStatut:e}),beforeSend:function(){console.log("ça charge");$(".block_info_chargement").show()}}).done(function(a){console.log(a);if(i==!0){$(".detailStatut").removeAttr("disabled");$(".detailStatut").html("")}
else{$("#suiviAdministratifNewForm .detailStatutSuiviAd").removeAttr("disabled");$("#suiviAdministratifEditForm .detailStatutSuiviAd").removeAttr("disabled");$("#suiviAdministratifNewForm .detailStatutSuiviAd").html("");$("#suiviAdministratifEditForm .detailStatutSuiviAd").html("");$("#ajaxForm .detailStatutSuiviAd").removeAttr("disabled");$("#ajaxForm .detailStatutSuiviAd").html("")};$(".block_info_chargement").hide();for(var n=0;n<a.details.length;n++){console.log(a.details[n].detail);if($("#tabNews").length!=0){if(i==!0){if(e==3||e==5||e==7){}
else{if(n==0)$("#newsForm .detailStatut").append("<option value=''>Choisissez</option>")};$("#newsForm .detailStatut").append("<option value="+a.details[n].id+">"+a.details[n].detail+"</option>")}
else{if(e==3||e==5||e==7){}
else{if(n==0){$("#suiviAdministratifNewForm .detailStatutSuiviAd").append("<option value=''>Choisissez</option>");$("#suiviAdministratifEditForm .detailStatutSuiviAd").append("<option value=''>Choisissez</option>")}};$("#suiviAdministratifNewForm .detailStatutSuiviAd").append("<option value="+a.details[n].id+">"+a.details[n].detail+"</option>");if(a.details[n].id==t){$("#suiviAdministratifEditForm .detailStatutSuiviAd").append("<option selected value="+a.details[n].id+">"+a.details[n].detail+"</option>")}
else{$("#suiviAdministratifEditForm .detailStatutSuiviAd").append("<option value="+a.details[n].id+">"+a.details[n].detail+"</option>");$("#ajaxForm .detailStatutSuiviAd").append("<option value="+a.details[n].id+">"+a.details[n].detail+"</option>")}}}
else{if(e==3||e==5||e==7){}
else{if(n==0){if(typeof formDuBeneficiaire!=="undefined")$(formDuBeneficiaire+" .detailStatut").append("<option value=''>Choisissez</option>");$("#ajaxForm .detailStatutSuiviAd").append("<option value=''>Choisissez</option>")}};if(typeof formDuBeneficiaire!=="undefined")$(formDuBeneficiaire+" .detailStatut").append("<option value="+a.details[n].id+">"+a.details[n].detail+"</option>");$("#ajaxForm .detailStatutSuiviAd").append("<option value="+a.details[n].id+">"+a.details[n].detail+"</option>")}}})};function tri(e){id=$(e).attr("id");value=$(e).val();$("#recherche_beneficiaire_tri").val(value);$("#ajaxForm").submit()}(function(){function e(e,i){$.ajax({url:Routing.generate("application_ajax_search_home"),type:$(i).attr("method"),data:$(i).serialize(),cache:!0,dataType:"json",beforeSend:function(){var i=document.getElementById("section_home_page_"+e);i.innerHTML="";i.innerHTML+="<div class=\"loading\"></div>";$("#pagination").empty()},success:function(i){html="<div id=\"section_home_page_"+(e+1)+"\"></div>";template=i;$("#section_home_page_"+e).html(template);$("#section_home_page_"+e).parent().append(html);$("#recherche_beneficiaire_page").val(parseInt($("#recherche_beneficiaire_page").val())+1);if(parseInt($("#indication_page_"+e).attr("data-page"))<parseInt($("#indication_page_"+e).attr("data-total"))){$("#section_home_page_1").attr("data-page","1")}}})};$("#ajaxForm").submit(function(i){$("#recherche_beneficiaire_page").val(0);$("#section-tab-home-benef").empty().append("<div id=\"section_home_page_1\" data-page=\"0\"></div>");i.preventDefault();history.pushState(null,null,Routing.generate("application_plateforme_homepage"));e(parseInt($("#recherche_beneficiaire_page").val())+1,this)});$(window).scroll(function(){if(document.getElementById("resultat_recherche_ajax")){if($(window).height()+$(window).scrollTop()==$(document).height()&&$("#section_home_page_1").attr("data-page")=="1"){$("#section_home_page_1").attr("data-page","0");e(parseInt($("#recherche_beneficiaire_page").val())+1,$("#ajaxForm"))}}});$("#excel").click(function(){document.search_beneficiaire.action=Routing.generate("application_csv_getListBeneficiaire");document.search_beneficiaire.submit();document.search_beneficiaire.action=Routing.generate("application_search_beneficiaire",{"page":1})})})();$(function(){$("#tabs_mission").tabs()});(function(){function e(){var e=document.getElementById("flashbag");if(e!=undefined){e.style.display="none"}};setTimeout(e,5000)})();$(function(){$("#newsForm").validate({rules:{"application_plateformebundle_news[statut]":{"required":!0,},"application_plateformebundle_news[detailStatut]":{"required":!0,},"application_plateformebundle_news[motif]":{"required":function(e){return $("#application_plateformebundle_news_statut").val()==12}}},errorElement:"div"})});$(function(){$("#recherche_beneficiaire_complementStatut").on("change",function(){if($(this).val()==">="){$("#recherche_beneficiaire_complementDetailStatut").prop("disabled",!0);$("#recherche_beneficiaire_complementDetailStatut option[value=\">=\"]").prop("selected",!0)}
else{$("#recherche_beneficiaire_complementDetailStatut").prop("disabled",!1)}})});
;$(window).load(function(){$("#overlayB").fadeOut("1500")});$(function(){typeUtilisateur=$("#application_usersbundle_users_typeUserHidden").val();if(typeUtilisateur!="Administrateur")$(".block_form_role_user").hide();if($(".role_user:checked").val()=="ROLE_CONSULTANT"){$(".block_form_calendar_uri").show();$(".block_form_calendar_id").show();$(".block_form_block_form_format_presence").show();$(".block_form_departement").show();$(".block_form_ville").show();$(".block_form_adresse").show()}
else{$(".block_form_calendar_uri").hide();$(".block_form_calendar_id").hide();$(".block_form_format_presence").hide();$(".block_form_departement").hide();$(".departementInputForAjax").val("0");$(".block_form_ville").hide();$(".block_form_adresse").hide()};$(".role_user").click(function(){switch($(this).val()){case"ROLE_CONSULTANT":$(".block_form_calendar_uri")[this.checked?"show":"hide"]();$(".block_form_calendar_id")[this.checked?"show":"hide"]();$(".block_form_format_presence")[this.checked?"show":"hide"]();$(".block_form_departement")[this.checked?"show":"hide"]();$(".block_form_ville")[this.checked?"show":"hide"]();$(".block_form_adresse")[this.checked?"show":"hide"]();$(".departementInputForAjax").val("");break}});$(".villeAjax option:first-child").val("");$(".villeAjax option:first-child").text("");$(".villeAjax").attr("disabled","disabled");$(".departementInputForAjax").keyup(function(){$(".villeAjax").attr("disabled","disabled");nombreOptions=$(".villeAjax  option").length;dpt=$(this).val();if(dpt.length==2){console.log("je lance l'ajax");$.ajax({type:"get",url:Routing.generate("application_plateforme_get_ville_ajax",{departement:dpt}),beforeSend:function(){console.log("ça charge");$(".block_info_chargement").show()}}).done(function(l){$(".block_info_chargement").hide();$(".villeAjax option").remove();$(".villeAjax").removeAttr("disabled");for(var e=0;e<l.villes.length;e++){$(".villeAjax").append("<option value="+l.villes[e].id+">"+l.villes[e].nom+"</option>")}})}});if($("#application_usersbundle_users_codePostalHidden").length==1){cp=$("#application_usersbundle_users_codePostalHidden").val();idVille=$("#application_usersbundle_users_idVilleHidden").val();if(cp.length==5){console.log("je lance l'ajax");$.ajax({type:"get",url:Routing.generate("application_plateforme_get_ville_ajax",{departement:cp.substr(0,2)}),beforeSend:function(){console.log("ça charge");$(".block_info_chargement").show()}}).done(function(l){$(".block_info_chargement").hide();$(".villeAjax option").remove();$(".villeAjax").removeAttr("disabled");for(var e=0;e<l.villes.length;e++){if(idVille==l.villes[e].id)$(".villeAjax").append("<option selected data-cp="+l.villes[e].cp+" value="+l.villes[e].id+">"+l.villes[e].nom+"</option>");else $(".villeAjax").append("<option data-cp="+l.villes[e].cp+" value="+l.villes[e].id+">"+l.villes[e].nom+"</option>")}})}}});$(function(){jQuery.extend(jQuery.validator.messages,{required:"Ceci ne peut être vide",accept:"Fichier accecpé : PDF",minlength:jQuery.validator.format("votre message doit être supérieur à 10 caractères"),});$("#form_mission_document").validate({rules:{"form[document]":{"required":!0,"accept":"application/pdf",}},errorElement:"div"});$("#form_mission_decline").validate({rules:{"mailing[message]":{"required":!0,"minlength":10,}},errorElement:"div"})});$("#form_declaration_activite").validate({rules:{"form[numDeclarationActivite]":{"required":!0,"digits":!0,"minlength":9,"maxlength":9,}},errorElement:"div"});
;$(document).ready(function(){if(document.getElementById("account")){rechercheVille($("#facturation_code_postal"),$("#facturation_ville"));$("#facturation_code_postal").on("keyup",function(){rechercheVille(this,$("#facturation_ville"))});formFacturation($("#facturation_type"));$("#facturation_type").on("change",function(){formFacturation(this)});$("form[name='facturation']").validate({errorElement:"span",errorPlacement:function(t,e){}});afficheAutreFonction($("#facturation_representantLegalFonction"));$("#facturation_representantLegalFonction").on("change",function(){afficheAutreFonction(this)})}});function afficheAutreFonction(t){if($(t).val()=="autre"){$("#autre_fonction").css("display","inherit");$("#facturation_intitule").attr("required",!0)}
else{$("#autre_fonction").css("display","none");$("#facturation_intitule").attr("required",!1)}};function rechercheVille(t,e){console.log(e.val());cp=$(t).val();if(cp.length==5){$.ajax({type:"get",url:Routing.generate("application_plateforme_get_ville_ajax",{departement:cp}),beforeSend:function(){e.empty()}}).done(function(t){for(var n=0;n<t.villes.length;n++){$(e).append("<option value="+t.villes[n].id+">"+t.villes[n].nom+"</option>")}})}
else{e.empty()}};function formFacturation(t){id=$(t).attr("id");val=$("#"+id+" option:selected").val();console.log(val);form=$(t).parents("form");champs=$(form).find(".modal-body").children();$(champs).each(function(t){if($(this).hasClass(val)||$(this).hasClass("facturation_type")){$(this).css("display","block");$(this).find(".form-control").attr("required","required");$(this).find(".not_required").attr("required",!1)}
else{$(this).css("display","none");$(this).find(".form-control").attr("required",!1);$(this).find("input[type='file']").attr("required",!1)}})};